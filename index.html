<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Coin Game</title>
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —Ñ–æ–Ω */
        body, html {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            justify-content: space-between;
            flex-direction: column;
            align-items: center;
            user-select: none;
            touch-action: none;
            overflow: hidden;
            background-image: url('background_img.png');
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        /* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            flex-grow: 1;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .coin-icon {
            margin-bottom: 15px;
            margin-top: 150px;
        }
        .coin-count {
            font-size: 7vw;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            letter-spacing: 1px;
            color: white;
        }
        /* –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ */
        .buttons {
            display: flex;
            justify-content: space-around;
            width: 100%;
            position: fixed;
            bottom: 0;
            padding: 10px;
            background-color: transparent;
        }
        .button {
            background-color: transparent;
            border: none;
            width: 60px;
            height: 70px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .button img {
            width: 35px;
            height: 35px;
            filter: brightness(0.7);
            transition: filter 0.2s ease;
        }
        .button-label {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
            transition: color 0.2s ease;
        }
        .button.active img {
            filter: brightness(1);
        }
        .button.active .button-label {
            color: white;
        }
        .hidden {
            display: none;
        }
        h2 {
            text-align: center;
        }
        .task-container {
            width: 97vw;
            background: #333;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            box-sizing: border-box;
            text-align: center;
        }
        .task-icon {
            margin-right: 15px;
        }
        .task-text {
            flex-grow: 1;
        }
        .task-text h3 {
            margin: 0;
            font-size: 3.6vw;
            color: white;
        }
        .task-text p {
            margin: 5px 0 0;
            font-size: 3.2vw;
            color: dodgerblue;
        }
        .claim-button {
            background: #007bff;
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 3.5vw;
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.3s;
            margin-left: 10px;
            position: relative;
            width: 17vw;
            height: 5vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            position: relative;
        }
        .loading:before {
            content: '';
            box-sizing: border-box;
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin-top: -10px;
            margin-left: -10px;
            border-radius: 50%;
            border: 2px solid #fff;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* –ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
        .claimed {
            background-color: gray !important;
            cursor: not-allowed;
        }
        /* –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è */
        .invite-button-container {
            width: 97vw;
            position: fixed;
            bottom: 100px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ */
            padding: 0 10px; /* –û—Ç—Å—Ç—É–ø—ã –ø–æ –±–æ–∫–∞–º */
        }
        .invite-button {
            width: 97vw;
            background-color: white;
            color: black;
            font-size: 4vw; /* –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
            padding: 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .invite-button:hover {
            background-color: #f0f0f0; /* –¶–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
        .invite-text {
            font-size: 4vw; /* –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
            width: 70vw;
            color: rgba(255, 255, 255, 0.6); /* –°–µ—Ä—ã–π —Ü–≤–µ—Ç */
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
            margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }
        .points-container{
            justify-items: center;
            margin-top: 30px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
            font-size: 5vw; /* –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ */
            color: white; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            padding: 10px; /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
        }
        .invited-friends p{
            margin-top: 10px;
            font-size: 25px;
        }
        #invited-count{
          font-size: 40vw;
          text-shadow: 1px 1px 20px #f0f0f0;
        }
    </style>
</head>
<body>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–∫–æ–Ω–∫–æ–π –º–æ–Ω–µ—Ç—ã –∏ —Å—á–µ—Ç—á–∏–∫–æ–º -->
    <div id="home" class="main-content">
        <div class="coin-icon">
            <img src="coin.png" alt="coin" width="160vw">
        </div>
        <div class="coin-count">Zeus Points: <span id="coin-count">0</span></div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ -->
    <div id="tasks" class="main-content hidden">
        <h2>Tasks List</h2>
        <div class="task-container">
            <div class="task-icon">
                <img src="task1.png" width="45vw" alt="task_icon">
            </div>
            <div class="task-text">
                <h3>Subscribe to the channel</h3>
                <p><b>+500 ZEUS</b></p>
            </div>
            <button class="claim-button" onclick="claimTask(this)">Claim</button>
        </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–º–∏ –¥—Ä—É–∑—å—è–º–∏ -->
    <div id="friends" class="main-content hidden">
        <h2>Friends</h2>
        <div class="invite-text">
            <b>Invite your friends to get more Zeus Pointsüí∞</b>
        </div>
        <div class="points-container">
            <div class="invited-friends">
                <span id="invited-count">0</span><p><b>Friends Invited</b></p>
            </div>
        </div>
        <div class="invite-button-container">
            <button class="invite-button" onclick="inviteFriends()"><b>Invite Friends</b></button>
        </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –ª–∏–¥–µ—Ä–æ–≤ -->
    <div id="leaderboard" class="main-content hidden">
        <h2>Leaderboard</h2>
    </div>

    <!-- –ß–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="black-screen" class="main-content hidden">
        <h2>Connect wallet</h2>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ -->
    <div class="buttons">
        <button id="homeButton" class="button" onclick="activateButton(this); goHome();">
            <img src="home_icon.png" alt="Home">
            <span class="button-label"><b>Home</b></span>
        </button>
        <button class="button" onclick="activateButton(this); showTasks();">
            <img src="tasks_icon.png" alt="Tasks">
            <span class="button-label"><b>Tasks</b></span>
        </button>
        <button class="button" onclick="activateButton(this); showFriends();">
            <img src="friends_icon.png" alt="Friends">
            <span class="button-label"><b>Friends</b></span>
        </button>
        <button class="button" onclick="activateButton(this); showLeaderboard();">
            <img src="leaderboard_icon.png" alt="Leaderboard">
            <span class="button-label"><b>Leaderboard</b></span>
        </button>
        <button class="button" onclick="activateButton(this); showBlackScreen();">
            <img src="wallet_icon.png" alt="Wallet">
            <span class="button-label"><b>Wallet</b></span>
        </button>
    </div>

<script async src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    window.addEventListener('load', () => {
    if (window.Telegram && window.Telegram.WebApp) {
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
        window.Telegram.WebApp.setHeaderColor("#000000");
    } else {
        console.error("Telegram WebApp –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω.");
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏–∑ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadCoins();
});

let coinCount = 0; // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π coinCount
let invitedCount = 0; // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
let userId = localStorage.getItem('userId');
if (!userId) {
    userId = 'user_' + Date.now();
    localStorage.setItem('userId', userId);
}

window.onload = function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
    const urlParams = new URLSearchParams(window.location.search);
    const refId = urlParams.get('ref');

    // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏ –æ–Ω –Ω–µ —Ä–∞–≤–µ–Ω –Ω–∞—à–µ–º—É —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º—É
    if (refId && refId !== userId) {
        let referrals = JSON.parse(localStorage.getItem('referrals')) || [];

        if (!referrals.includes(refId)) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π
            invitedCount = parseInt(localStorage.getItem('invitedCount')) || 0;
            invitedCount++;
            localStorage.setItem('invitedCount', invitedCount);
            document.getElementById('invited-count').textContent = invitedCount;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
            referrals.push(refId);
            localStorage.setItem('referrals', JSON.stringify(referrals));

        }
    } else {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π –∏–∑ localStorage
        invitedCount = parseInt(localStorage.getItem('invitedCount')) || 0;
        document.getElementById('invited-count').textContent = invitedCount;
    }

    goHome();
    activateButton(document.getElementById('homeButton'));
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–æ–Ω–µ—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
function loadCoins() {
    const savedCoins = localStorage.getItem('coinCount');
    if (savedCoins) {
        coinCount = parseInt(savedCoins, 10); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ
    }
    document.getElementById('coin-count').textContent = coinCount; // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–µ
    const taskClaimed = localStorage.getItem('taskClaimed');
    if (taskClaimed === 'true') {
        const claimButton = document.querySelector('.claim-button');
        claimButton.classList.add('claimed');
        claimButton.textContent = 'Claimed';
        claimButton.disabled = true; // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage
function addCoins(amount) {
    coinCount += amount; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
    localStorage.setItem('coinCount', coinCount); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
    document.getElementById('coin-count').textContent = coinCount; // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏
function activateButton(button) {
    const buttons = document.querySelectorAll('.button');
    buttons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
function goHome() {
    hideAllPages();
    document.getElementById('home').classList.remove('hidden');
}

function showTasks() {
    hideAllPages();
    document.getElementById('tasks').classList.remove('hidden');
}

function showFriends() {
    hideAllPages();
    document.getElementById('friends').classList.remove('hidden');
}

function showLeaderboard() {
    hideAllPages();
    document.getElementById('leaderboard').classList.remove('hidden');
}

function showBlackScreen() {
    hideAllPages();
    document.getElementById('black-screen').classList.remove('hidden');
}

function hideAllPages() {
    const pages = document.querySelectorAll('.main-content');
    pages.forEach(page => page.classList.add('hidden'));
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "Claim"
function claimTask(button) {
    if (button.classList.contains('claimed')) return; // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ —É–∂–µ –ø–æ–ª—É—á–µ–Ω–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ

    button.classList.add('loading'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
    button.textContent = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—Å—Ç –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Telegram-–∫–∞–Ω–∞–ª
    window.open('https://t.me/hamster_kombat', '_blank');

    // –°—Ç–∞–≤–∏–º –∑–∞–¥–µ—Ä–∂–∫—É –Ω–∞ 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏
    setTimeout(() => {
        button.classList.remove('loading'); // –£–±–∏—Ä–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏
        button.classList.add('claimed'); // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª—å "Claimed"
        button.textContent = 'Claimed'; // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ "Claimed"
        button.disabled = true; // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É

        addCoins(500); // –î–æ–±–∞–≤–ª—è–µ–º 500 –º–æ–Ω–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
        localStorage.setItem('taskClaimed', 'true');
    }, 5000);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "Invite Friends"
function inviteFriends() {
    // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É —Å –≤–∞—à–∏–º userId
    const inviteLink = `https://t.me/Zeuscoins_bot/Zeus?ref=${userId}`;
    const text = `Join me in this awesome game!`;

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º API Telegram –¥–ª—è –æ–±–º–µ–Ω–∞ —Å—Å—ã–ª–∫–æ–π
    if (navigator.share) {
        navigator.share({
            title: 'Invite Friends',
            text: text,
            url: inviteLink
        }).catch(console.error);
    } else {
        alert("Copy this link to invite your friends: " + inviteLink);
    }
}
</script>

</body>
</html>
